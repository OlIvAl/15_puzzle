(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,n){e.exports=n(45)},45:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(6),i=n.n(a),c=n(7),l=n(8),u=n(12),s=n(9),d=n(13),f=n(3),m=n(1),v=n(2),p=4,h=100*p+-1*(p-1);function b(){var e=Object(m.a)(["\n  width: ","px;\n  height: ","px;\n  border: ","px solid #aaa;\n  background-color: #e5e5e5;\n  position: relative;\n  \n  @media (max-width: ","px) {\n    width: ","px;\n    height: ","px;\n  }\n"]);return b=function(){return e},e}var O=v.a.div(b(),h,h,3,1.2*h,h/1.5,h/1.5);function y(){var e=Object(m.a)(["\n  cursor: pointer;\n  background-color: #fff;\n  color: #5f5f5f;\n  border: 1px solid #aaa;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 36px;\n  box-sizing: border-box;\n  width: ","px;\n  height: ","px;\n  position: absolute;\n  top: ","px;\n  left: ","px;\n  \n  @media (hover: hover) {\n    &:hover {\n      background: #f5f5f5;\n    }\n  }\n  \n  @media (max-width: ","px) {\n    width: ","px;\n    height: ","px;\n  }\n"]);return y=function(){return e},e}var w=Object(v.a)("div")(y(),100,100,function(e){return e.top},function(e){return e.left},1.2*h,100/1.5,100/1.5),g=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={coef:1},n.mql=window.matchMedia("(max-width: ".concat(1.2*h,"px)")),n.mediaQueryListener=n.mediaQueryListener.bind(Object(f.a)(Object(f.a)(n))),n.onClick=n.onClick.bind(Object(f.a)(Object(f.a)(n))),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"mediaQueryListener",value:function(e){e.matches?this.setState({coef:1.5}):this.setState({coef:1})}},{key:"onClick",value:function(){var e=this.props,t=e.tile;(0,e.move)(t)}},{key:"componentDidMount",value:function(){this.mql.addListener(this.mediaQueryListener),this.mql.matches&&this.setState({coef:1.5})}},{key:"componentWillUnmount",value:function(){this.mql.removeListener(this.mediaQueryListener)}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.top,r=e.left,a=this.state.coef;return o.a.createElement(w,{top:n/a,left:r/a,onClick:this.onClick},t)}}]),t}(o.a.Component),I=function(e){var t=e.count;return o.a.createElement("div",null,o.a.createElement("strong",null,"Count:")," ",t)},E=n(17),j=n(29),x=function(e){return e.tiles.present},C=function(e){var t=e.timer.time,n=Math.floor(t/3600),r=Math.floor((t-3600*n)/60),o=t-3600*n-60*r;return"".concat(n.toString().length<2?"0".concat(n):n,":")+"".concat(r.toString().length<2?"0".concat(r):r,":")+"".concat(o.toString().length<2?"0".concat(o):o)},k=function(e){return e.counter},N=function(e){return e.modal},T=Object(j.a)(x,function(e){return Object.values(e).map(function(e){var t=e.title,n=e.row,r=e.col;return{title:t,top:100*n+-1*n,left:100*r+-1*r}})}),_=function(){return function(e){var t=setInterval(function(){e({type:"INCREMENT_TIMER_ACTION"})},1e3);e(function(e){return{type:"INIT_TIMER_ACTION",payload:e}}(t))}},M=function(e){return function(t,n){var r=n(),o=r.counter,a=r.tiles.present[0];(1===Math.abs(a.col-e.col)&&a.row===e.row||1===Math.abs(a.row-e.row)&&a.col===e.col)&&(t(function(e){return{type:"MOVE_TILE_ACTION",payload:e}}(e)),localStorage.setItem("state",JSON.stringify(n())),0===o&&t(_()),t(function(e,t){var n=t(),r=n.tiles.present,o=n.timer.intervalID;r[0].row===p-1&&r[0].col===p-1&&Object.values(r).every(function(e){var t=e.title,n=e.row,r=e.col;return!t||r+1+p*n===t})&&(e({type:"WIN_ACTION"}),localStorage.removeItem("state"),o&&clearInterval(o))}))}},A=document.getElementById("modal-root"),L=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).el=void 0,n.el=document.createElement("div"),n.el.style.position="fixed",n.el.style.top="0",n.el.style.left="0",n.el.style.width="100%",n.el.style.height="100vh",n.el.style.display="flex",n.el.style.justifyContent="center",n.el.style.alignItems="center",n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){A.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){A.removeChild(this.el)}},{key:"render",value:function(){return i.a.createPortal(this.props.children,this.el)}}]),t}(o.a.Component);function D(){var e=Object(m.a)(["\n  border-radius: 4px;\n  padding: 6px 10px;\n  background-color: #358ada;\n  color: #fff;\n  text-decoration: none;\n  border: none;\n  width: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 20px;\n"]);return D=function(){return e},e}function S(){var e=Object(m.a)(["\n  \n"]);return S=function(){return e},e}function W(){var e=Object(m.a)(["\n  font-size: 24px;\n  font-weight: bold;\n  margin-bottom: 12px;\n"]);return W=function(){return e},e}function R(){var e=Object(m.a)(["\n  width: 300px;\n  padding: 20px;\n  background-color: #fff;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return R=function(){return e},e}var G=v.a.div(R()),U=v.a.div(W()),H=v.a.div(S()),Q=v.a.div(D()),q=function(e){var t=e.onClose,n=e.children;return o.a.createElement(G,null,o.a.createElement(U,null,"You WIN!!!"),o.a.createElement(H,null,n),o.a.createElement(Q,{onClick:t},"Close"))};function z(){var e=Object(m.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100vh;\n  background-color: rgba(0, 0, 0 ,0.5);\n  z-index: -1;\n"]);return z=function(){return e},e}var J=v.a.div(z()),V=function(e){var t=e.onClose,n=e.children;return o.a.createElement(L,null,o.a.createElement(q,{onClose:t},n),o.a.createElement(J,{onClick:t}))},B=function(e){var t=e.time;return o.a.createElement("div",null,o.a.createElement("strong",null,"Time:")," ",t)},P=n(11),Y=n.n(P);function F(){var e=Object(m.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 12px;\n  width: 100%;\n"]);return F=function(){return e},e}var K=v.a.div(F());function X(){var e=Object(m.a)(["\n  border-radius: 4px;\n  padding: 6px 10px;\n  background-color: #0d9095;\n  color: #fff;\n  text-decoration: none;\n  border: none;\n  \n  &:hover {\n    background-color: #17bbc2;\n  }\n  &:disabled {\n    background-color: #999;\n  }\n"]);return X=function(){return e},e}var Z=v.a.button(X());function $(){var e=Object(m.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 12px;\n  width: 60%;\n"]);return $=function(){return e},e}var ee=v.a.div($());function te(){var e=Object(m.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n"]);return te=function(){return e},e}var ne=v.a.div(te()),re=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).keypressHandler=n.keypressHandler.bind(Object(f.a)(Object(f.a)(n))),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"keypressHandler",value:function(e){this.props.keypress(e.code)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keypressHandler,!1),this.props.continueTimer()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keypressHandler,!1)}},{key:"render",value:function(){var e=this.props,t=e.tilesWithCoords,n=e.tiles,r=e.counter,a=e.time,i=e.initNewGame,c=e.move,l=e.modal,u=e.closeModal,s=e.undo;return o.a.createElement(ne,null,o.a.createElement(K,null,o.a.createElement(I,{count:r}),o.a.createElement(B,{time:a})),o.a.createElement(O,null,t.map(function(e,t){var r=e.title,a=e.top,i=e.left;return r?o.a.createElement(g,{title:r,top:a,left:i,tile:n[t],move:c,key:r}):null})),o.a.createElement(ee,null,o.a.createElement(Z,{onClick:i},"New game"),o.a.createElement(Z,{onClick:s,disabled:!r},"Undo")),"WIN_MODAL"===l?o.a.createElement(V,{onClose:u},o.a.createElement("strong",null,"Count: "),r,o.a.createElement("br",null),o.a.createElement("strong",null,"Time: "),a):null)}}]),t}(o.a.Component),oe={initNewGame:function(){return function(e,t){var n=t().timer.intervalID;n&&clearInterval(n),e({type:"INIT_NEW_GAME_ACTION"}),localStorage.removeItem("state")}},move:M,keypress:function(e){return function(t,n){var r=n().tiles.present,o=r[0],a=void 0;"ArrowUp"===e&&o.row+1<p?a=Object.values(r).find(function(e){return e.row===o.row+1&&e.col===o.col}):"ArrowDown"===e&&o.row>0?a=Object.values(r).find(function(e){return e.row===o.row-1&&e.col===o.col}):"ArrowLeft"===e&&o.col+1<p?a=Object.values(r).find(function(e){return e.row===o.row&&e.col===o.col+1}):"ArrowRight"===e&&o.col>0&&(a=Object.values(r).find(function(e){return e.row===o.row&&e.col===o.col-1})),a&&t(M(a))}},closeModal:function(){return{type:"CLOSE_MODAL_ACTION"}},continueTimer:function(){return function(e,t){var n=t(),r=n.counter,o=n.timer,a=o.time,i=o.intervalID;r&&i&&a&&e(_())}},undo:P.ActionCreators.undo},ae=Object(E.b)(function(e){return{tilesWithCoords:T(e),tiles:x(e),time:C(e),counter:k(e),modal:N(e)}},oe)(re),ie=n(5),ce=n(30),le=(n(44),n(15)),ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{time:0,intervalID:void 0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_TIMER_ACTION":return Object(le.a)({},e,{intervalID:t.payload});case"INCREMENT_TIMER_ACTION":return Object(le.a)({},e,{time:e.time+1});case"INIT_NEW_GAME_ACTION":return{time:0,intervalID:void 0};default:return e}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"WIN_ACTION":return"WIN_MODAL";case"CLOSE_MODAL_ACTION":return"";default:return e}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case"MOVE_TILE_ACTION":return e+1;case"INIT_NEW_GAME_ACTION":return 0;case P.ActionTypes.UNDO:return e-1;default:return e}},fe=n(16);function me(e){return function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e}(Array(Math.pow(e,2)).fill(void 0).map(function(e,t){return t})).reduce(function(e,t,n){return e[t]={title:t,row:Math.floor(n/p),col:n%p},e},{})}var ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVE_TILE_ACTION":var n=e[0],r=t.payload;return Object(le.a)({},e,{0:{title:0,row:r.row,col:r.col}},Object(fe.a)({},r.title,{title:r.title,row:n.row,col:n.col}));case"INIT_NEW_GAME_ACTION":return me(p);default:return e}},pe=Object(ie.c)({tiles:Y()(ve),counter:de,timer:ue,modal:se}),he=[ce.a],be=JSON.parse(localStorage.getItem("state")||"null")||{tiles:me(p),counter:0,timer:{time:0,intervalID:void 0},modal:""},Oe=Object(ie.d)(pe,be,ie.a.apply(void 0,he));i.a.render(o.a.createElement(E.a,{store:Oe},o.a.createElement(ae,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.c2f1ecea.chunk.js.map